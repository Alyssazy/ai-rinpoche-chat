# 🎉 新功能测试指南

本指南用于测试最新添加的两个功能：**历史搜索功能** 和 **数学公式渲染支持**。

---

## 🔍 功能一：历史搜索功能

### 功能说明
在侧边栏中可以搜索历史对话，支持实时过滤和关键词高亮显示。

### 测试步骤

#### 1. 基础搜索测试
1. 打开应用并确保有多个历史对话
2. 点击左上角菜单按钮打开侧边栏
3. 在搜索框中输入关键词（如"智慧"）
4. **预期结果**：
   - 对话列表自动过滤，只显示标题包含关键词的对话
   - 匹配的关键词以金色高亮显示
   - 搜索框右侧出现清除按钮（×）

#### 2. 实时搜索测试
1. 在搜索框中逐字输入关键词
2. **预期结果**：
   - 每输入一个字符，列表立即更新
   - 匹配项实时变化

#### 3. 清除搜索测试
1. 输入搜索关键词后
2. 点击搜索框右侧的清除按钮（×）
3. **预期结果**：
   - 搜索框内容清空
   - 显示全部历史对话
   - 清除按钮消失

#### 4. 无结果测试
1. 输入一个不存在的关键词（如"xyz123"）
2. **预期结果**：
   - 显示"未找到匹配的对话"提示
   - 显示搜索图标和提示文字

#### 5. 快捷键测试
1. 在搜索框中输入内容
2. 按下 `ESC` 键
3. **预期结果**：
   - 搜索框内容清空
   - 恢复显示全部对话

### 验收标准
- ✅ 搜索功能实时响应
- ✅ 关键词高亮显示清晰
- ✅ 清除按钮正常工作
- ✅ 无结果时显示友好提示
- ✅ ESC 键清除搜索

---

## 📐 功能二：数学公式渲染支持

### 功能说明
支持使用 KaTeX 渲染数学公式，包括行内公式和块级公式。

### 测试步骤

#### 1. 行内公式测试
向 AI 发送包含行内公式的消息：
```
请解释一下欧拉公式 $e^{i\pi} + 1 = 0$
```

**预期结果**：
- 公式 `$e^{i\pi} + 1 = 0$` 被正确渲染为数学符号
- 公式与文字在同一行显示
- 公式字体大小合适，易于阅读

#### 2. 块级公式测试
向 AI 发送包含块级公式的消息：
```
请展示积分公式：
$$\int_{a}^{b} f(x)dx = F(b) - F(a)$$
```

**预期结果**：
- 公式独占一行，居中显示
- 有浅金色背景和边框
- 公式清晰可读

#### 3. 复杂公式测试
测试更复杂的数学公式：
```
展示二次方程求根公式：
$$x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}$$
```

**预期结果**：
- 分数、根号、上下标正确渲染
- 布局美观，无重叠

#### 4. 多个公式测试
发送包含多个公式的消息：
```
数学常数：
- 圆周率：$\pi \approx 3.14159$
- 自然对数底：$e \approx 2.71828$
- 黄金分割比：$\phi = \frac{1+\sqrt{5}}{2}$

勾股定理：
$$a^2 + b^2 = c^2$$
```

**预期结果**：
- 所有公式正确渲染
- 行内和块级公式混合显示正常

#### 5. 矩阵和向量测试
```
请展示矩阵：
$$
\begin{bmatrix}
1 & 2 & 3 \\
4 & 5 & 6 \\
7 & 8 & 9
\end{bmatrix}
$$
```

**预期结果**：
- 矩阵正确渲染
- 括号和对齐正确

#### 6. 主题切换测试
1. 在显示数学公式的页面
2. 切换深色/浅色主题
3. **预期结果**：
   - 公式在两种主题下都清晰可读
   - 背景颜色适配当前主题

### 常用数学公式示例

#### 基础符号
- 希腊字母：`$\alpha, \beta, \gamma, \Delta, \Sigma$`
- 运算符：`$\pm, \times, \div, \leq, \geq, \neq$`
- 集合：`$\in, \subset, \cup, \cap, \emptyset$`

#### 高级公式
- 求和：`$\sum_{i=1}^{n} i = \frac{n(n+1)}{2}$`
- 极限：`$\lim_{x \to \infty} \frac{1}{x} = 0$`
- 导数：`$\frac{d}{dx}(x^2) = 2x$`
- 积分：`$\int x^2 dx = \frac{x^3}{3} + C$`

### 验收标准
- ✅ 行内公式正确渲染
- ✅ 块级公式居中显示，有背景
- ✅ 复杂公式（分数、根号、矩阵）正确显示
- ✅ 主题切换后公式仍清晰
- ✅ 公式语法错误不影响其他内容显示

---

## 🎯 综合测试

### 场景：搜索包含数学公式的对话
1. 与 AI 进行多轮对话，其中包含数学公式
2. 等待对话被保存到历史记录
3. 使用搜索功能搜索包含特定关键词的对话
4. 切换到包含公式的对话
5. **预期结果**：
   - 搜索功能正常
   - 切换后公式正确显示
   - 两个功能互不干扰

---

## 📝 问题报告

如果在测试中发现问题，请记录以下信息：

1. **问题描述**：
2. **复现步骤**：
3. **预期行为**：
4. **实际行为**：
5. **浏览器信息**：
6. **截图**（如有）：

---

## ✅ 测试完成清单

- [ ] 历史搜索 - 基础功能
- [ ] 历史搜索 - 实时过滤
- [ ] 历史搜索 - 清除功能
- [ ] 历史搜索 - 无结果提示
- [ ] 历史搜索 - 快捷键
- [ ] 数学公式 - 行内公式
- [ ] 数学公式 - 块级公式
- [ ] 数学公式 - 复杂公式
- [ ] 数学公式 - 主题适配
- [ ] 综合测试 - 功能互操作

---

**测试日期**：__________

**测试人员**：__________

**测试结果**：□ 通过  □ 失败

**备注**：
